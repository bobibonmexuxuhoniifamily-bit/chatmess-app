/* ============================================
   üí¨ ChatMess V2 - Ultra Glossy + Auth + Friends
   ============================================ */

:root {
    --primary: #5865F2;
    --primary-light: #7289DA;
    --primary-dark: #4752C4;
    --primary-glow: rgba(88,101,242,0.4);
    --accent: #00D4AA;
    --danger: #ef4444;
    --success: #10b981;
    --warning: #f59e0b;

    --bg-app: #f0f2f5;
    --bg-sidebar: #ffffff;
    --bg-chat: #f7f8fc;
    --bg-card: #ffffff;
    --bg-input: #ffffff;
    --bg-hover: rgba(0,0,0,0.04);
    --bg-msg-mine: linear-gradient(135deg, #5865F2 0%, #7289DA 100%);
    --bg-msg-other: #ffffff;
    --bg-system: rgba(88,101,242,0.06);

    --text-primary: #1a1a2e;
    --text-secondary: #5c5e6e;
    --text-muted: #9497a8;
    --text-white: #ffffff;

    --border: rgba(0,0,0,0.06);
    --border-strong: rgba(0,0,0,0.12);

    --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
    --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
    --shadow-lg: 0 8px 32px rgba(0,0,0,0.12);
    --shadow-xl: 0 20px 60px rgba(0,0,0,0.15);
    --shadow-plastic: 0 4px 14px rgba(0,0,0,0.07), inset 0 1px 0 rgba(255,255,255,0.8), inset 0 -1px 0 rgba(0,0,0,0.03);
    --shadow-glass: 0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.95);
    --shadow-glow: 0 0 24px var(--primary-glow);
    --shadow-btn: 0 2px 8px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.7);
    --shadow-btn-hover: 0 6px 20px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.8);

    --radius-xs: 6px;
    --radius-sm: 10px;
    --radius-md: 14px;
    --radius-lg: 20px;
    --radius-xl: 24px;
    --radius-full: 50px;
    --radius-msg: 20px;
    --radius-msg-tail: 6px;

    --transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
    --transition-fast: all 0.15s ease;
    --transition-bounce: all 0.35s cubic-bezier(0.34,1.56,0.64,1);
    --sidebar-width: 320px;
}

body.dark-mode {
    --bg-app: #0b0d14; --bg-sidebar: #12141c; --bg-chat: #0f1119;
    --bg-card: #1a1d28; --bg-input: #1a1d28; --bg-hover: rgba(255,255,255,0.04);
    --bg-msg-other: #1e2130; --text-primary: #e4e6f0; --text-secondary: #9497a8;
    --text-muted: #6b6e80; --border: rgba(255,255,255,0.06); --border-strong: rgba(255,255,255,0.1);
    --shadow-plastic: 0 4px 14px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.06);
    --shadow-glass: 0 8px 32px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.06);
    --shadow-btn: 0 2px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.06);
}

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden;font-family:'Segoe UI',-apple-system,BlinkMacSystemFont,system-ui,sans-serif;font-size:14px;color:var(--text-primary);background:var(--bg-app);-webkit-font-smoothing:antialiased}
.hidden{display:none!important}

/* ============================================
   üö™ AUTH PAGE
   ============================================ */
.auth-overlay{position:fixed;inset:0;background:linear-gradient(135deg,#1a1a3e 0%,#2d1b69 30%,#5865F2 60%,#7289DA 100%);display:flex;align-items:center;justify-content:center;z-index:9999;overflow:hidden}
.auth-particles{position:absolute;inset:0;overflow:hidden}
.particle{position:absolute;width:6px;height:6px;background:rgba(255,255,255,0.3);border-radius:50%;animation:pFloat linear infinite}
@keyframes pFloat{0%{transform:translateY(100vh) rotate(0);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-10vh) rotate(720deg);opacity:0}}

.auth-card{background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);border-radius:var(--radius-xl);padding:40px;width:440px;max-width:92vw;box-shadow:var(--shadow-xl),0 0 80px rgba(88,101,242,0.2),inset 0 1px 0 rgba(255,255,255,1);animation:cardPop .6s cubic-bezier(.34,1.56,.64,1);position:relative;z-index:10}
body.dark-mode .auth-card{background:rgba(26,29,40,0.95)}
@keyframes cardPop{0%{opacity:0;transform:scale(.8) translateY(40px)}100%{opacity:1;transform:scale(1) translateY(0)}}

.auth-logo{width:80px;height:80px;margin:0 auto 16px;position:relative}
.logo-bubble{width:80px;height:80px;background:linear-gradient(135deg,#5865F2,#7289DA,#00D4AA);border-radius:var(--radius-xl);display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;box-shadow:0 12px 40px rgba(88,101,242,0.4),inset 0 2px 0 rgba(255,255,255,0.25);position:relative;z-index:2;animation:logoPulse 3s ease-in-out infinite}
@keyframes logoPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.logo-ring{position:absolute;inset:-8px;border:3px solid rgba(88,101,242,0.2);border-radius:calc(var(--radius-xl) + 4px);animation:ringPulse 2s ease-in-out infinite}
@keyframes ringPulse{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}

.auth-title{text-align:center;font-size:30px;font-weight:800;background:linear-gradient(135deg,#5865F2,#00D4AA);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:4px}
.auth-sub{text-align:center;color:var(--text-muted);font-size:13px;margin-bottom:28px}
.auth-form{display:flex;flex-direction:column;gap:14px}

.input-group{display:flex;align-items:center;border:2px solid var(--border-strong);border-radius:var(--radius-md);overflow:hidden;transition:var(--transition);box-shadow:var(--shadow-plastic);background:var(--bg-input)}
.input-group:focus-within{border-color:var(--primary);box-shadow:0 0 0 4px rgba(88,101,242,0.12),var(--shadow-plastic)}
.input-icon{width:46px;height:46px;display:flex;align-items:center;justify-content:center;color:var(--text-muted);font-size:15px;flex-shrink:0}
.input-group:focus-within .input-icon{color:var(--primary)}
.auth-input{flex:1;height:46px;border:none;outline:none;font-size:14px;font-family:inherit;background:transparent;color:var(--text-primary);padding-right:14px}
.auth-input::placeholder{color:var(--text-muted)}

.toggle-pw-btn{width:40px;height:46px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;font-size:14px;transition:var(--transition)}
.toggle-pw-btn:hover{color:var(--primary)}

.name-check{font-size:12px;padding:4px 12px;border-radius:var(--radius-sm);transition:var(--transition)}
.name-check.available{color:var(--success);background:rgba(16,185,129,0.08)}
.name-check.taken{color:var(--danger);background:rgba(239,68,68,0.08)}
.name-check.checking{color:var(--text-muted)}

.pw-strength{display:flex;align-items:center;gap:10px}
.pw-bar{flex:1;height:6px;background:var(--border);border-radius:3px;overflow:hidden}
.pw-fill{height:100%;border-radius:3px;transition:var(--transition);width:0}
.pw-fill.weak{width:33%;background:var(--danger)}
.pw-fill.medium{width:66%;background:var(--warning)}
.pw-fill.strong{width:100%;background:var(--success)}
.pw-label{font-size:11px;color:var(--text-muted);min-width:50px}

.avatar-pick-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.pick-label{font-size:12px;color:var(--text-muted)}
.color-picks{display:flex;gap:5px;flex-wrap:wrap}
.color-pick{width:26px;height:26px;border-radius:50%;cursor:pointer;border:2.5px solid transparent;transition:var(--transition-bounce);box-shadow:0 2px 6px rgba(0,0,0,0.15),inset 0 1px 0 rgba(255,255,255,0.3)}
.color-pick:hover{transform:scale(1.2)}
.color-pick.active{border-color:var(--text-primary);transform:scale(1.15)}

.avatar-preview-sm{display:flex;align-items:center;gap:12px;padding:10px 14px;background:var(--bg-hover);border-radius:var(--radius-md)}
.preview-av{width:44px;height:44px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:800;color:#fff;background:var(--primary);box-shadow:var(--shadow-plastic);transition:var(--transition-bounce)}
#regPreviewName{font-size:14px;font-weight:600;color:var(--text-primary)}

.auth-error{padding:8px 14px;background:rgba(239,68,68,0.08);color:var(--danger);border-radius:var(--radius-sm);font-size:13px;border-left:4px solid var(--danger);animation:shake .3s ease}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}

.auth-btn{display:flex;align-items:center;justify-content:center;gap:10px;height:50px;border:none;background:linear-gradient(135deg,#5865F2,#7289DA);color:#fff;font-size:15px;font-weight:700;font-family:inherit;border-radius:var(--radius-md);cursor:pointer;transition:var(--transition-bounce);position:relative;overflow:hidden;box-shadow:0 8px 28px rgba(88,101,242,0.35),inset 0 1px 0 rgba(255,255,255,0.2)}
.auth-btn:hover{transform:translateY(-3px);box-shadow:0 12px 40px rgba(88,101,242,0.45)}
.auth-btn:active{transform:translateY(0)}
.auth-btn:disabled{opacity:.6;pointer-events:none}

.btn-shine{position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transform:skewX(-20deg);animation:shine 3s ease-in-out infinite}
@keyframes shine{0%,100%{left:-100%}50%{left:150%}}

.auth-switch{text-align:center;font-size:13px;color:var(--text-muted)}
.auth-switch a{color:var(--primary);font-weight:600;text-decoration:none;transition:var(--transition)}
.auth-switch a:hover{text-decoration:underline}
.auth-footer{text-align:center;font-size:11px;color:var(--text-muted);margin-top:12px;display:flex;align-items:center;justify-content:center;gap:6px}

/* ============================================
   üì± APP LAYOUT
   ============================================ */
.app-container{display:flex;height:100vh;background:var(--bg-app)}

/* Sidebar */
.sidebar{width:var(--sidebar-width);background:var(--bg-sidebar);border-right:1px solid var(--border);display:flex;flex-direction:column;box-shadow:2px 0 12px rgba(0,0,0,0.04);z-index:20;flex-shrink:0}

.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
.sidebar-logo{display:flex;align-items:center;gap:10px}
.sidebar-logo-icon{width:34px;height:34px;background:linear-gradient(135deg,#5865F2,#00D4AA);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;color:#fff;font-size:15px;box-shadow:var(--shadow-plastic)}
.sidebar-logo-text{font-size:17px;font-weight:800;background:linear-gradient(135deg,#5865F2,#00D4AA);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.sidebar-header-actions{display:flex;gap:4px}

.sidebar-btn{width:34px;height:34px;border:none;background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;border-radius:var(--radius-sm);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;transition:var(--transition-bounce);box-shadow:var(--shadow-plastic);position:relative}
.sidebar-btn:hover{transform:scale(1.1);box-shadow:var(--shadow-glow)}

.notif-dot{position:absolute;top:-2px;right:-2px;width:12px;height:12px;background:var(--danger);border-radius:50%;border:2px solid var(--bg-sidebar);box-shadow:0 1px 4px rgba(239,68,68,0.4);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(.85)}}

.icon-btn{width:32px;height:32px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;transition:var(--transition-bounce);font-size:14px}
.icon-btn:hover{background:var(--bg-hover);color:var(--text-primary)}

/* Search */
.sidebar-search{padding:10px 14px}
.search-box{display:flex;align-items:center;gap:10px;padding:0 14px;height:38px;background:var(--bg-hover);border-radius:var(--radius-full);border:1.5px solid var(--border);transition:var(--transition);box-shadow:var(--shadow-xs)}
.search-box:focus-within{border-color:var(--primary);background:var(--bg-input);box-shadow:0 0 0 3px rgba(88,101,242,0.1)}
.search-box i{color:var(--text-muted);font-size:12px}
.search-box input{flex:1;border:none;outline:none;background:transparent;font-size:13px;font-family:inherit;color:var(--text-primary)}

/* Sidebar Tabs */
.sidebar-tabs{display:flex;padding:0 10px;border-bottom:1px solid var(--border);gap:2px}
.sidebar-tab{flex:1;padding:10px;border:none;background:transparent;font-size:12px;font-weight:600;color:var(--text-muted);cursor:pointer;border-bottom:2px solid transparent;transition:var(--transition);font-family:inherit;display:flex;align-items:center;justify-content:center;gap:6px;border-radius:var(--radius-sm) var(--radius-sm) 0 0}
.sidebar-tab:hover{color:var(--text-primary);background:var(--bg-hover)}
.sidebar-tab.active{color:var(--primary);border-bottom-color:var(--primary)}
.tab-badge{min-width:18px;height:18px;background:var(--danger);color:#fff;font-size:10px;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0 4px}
.tab-content{flex:1;overflow-y:auto;padding:6px}
.tab-content::-webkit-scrollbar{width:4px}
.tab-content::-webkit-scrollbar-thumb{background:var(--border-strong);border-radius:4px}

/* Room Items */
.room-item{display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:var(--radius-md);cursor:pointer;transition:var(--transition);margin-bottom:2px}
.room-item:hover{background:var(--bg-hover)}
.room-item.active{background:linear-gradient(135deg,rgba(88,101,242,0.1),rgba(88,101,242,0.05));box-shadow:var(--shadow-sm),inset 0 0 0 1.5px rgba(88,101,242,0.15)}
.room-icon-box{width:40px;height:40px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:18px;background:linear-gradient(135deg,rgba(88,101,242,0.12),rgba(88,101,242,0.04));box-shadow:var(--shadow-plastic);flex-shrink:0}
.room-item.active .room-icon-box{background:linear-gradient(135deg,#5865F2,#7289DA);box-shadow:0 4px 14px rgba(88,101,242,0.3)}
.room-details{flex:1;min-width:0}
.room-name{font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.room-last-msg{font-size:12px;color:var(--text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}
.room-unread{min-width:20px;height:20px;background:linear-gradient(135deg,#5865F2,#7289DA);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;box-shadow:0 2px 8px rgba(88,101,242,0.35);padding:0 5px}

/* DM Items */
.dm-item{display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:var(--radius-md);cursor:pointer;transition:var(--transition);margin-bottom:2px}
.dm-item:hover{background:var(--bg-hover)}
.dm-item.active{background:linear-gradient(135deg,rgba(88,101,242,0.1),rgba(88,101,242,0.05))}
.dm-avatar-box{width:40px;height:40px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:17px;font-weight:700;color:#fff;box-shadow:var(--shadow-plastic);flex-shrink:0;position:relative}
.dm-avatar-box .online-badge{position:absolute;bottom:-2px;right:-2px;width:12px;height:12px;background:var(--success);border-radius:50%;border:2.5px solid var(--bg-sidebar)}
.dm-avatar-box .offline-badge{position:absolute;bottom:-2px;right:-2px;width:12px;height:12px;background:var(--text-muted);border-radius:50%;border:2.5px solid var(--bg-sidebar)}

/* Online Section */
.sidebar-section{padding:8px 14px;border-top:1px solid var(--border)}
.section-header{display:flex;align-items:center;gap:8px;font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;padding:4px 0}
.online-dot{color:#43b581;font-size:7px}
.online-list{display:flex;flex-direction:column;gap:2px;max-height:140px;overflow-y:auto}
.online-user{display:flex;align-items:center;gap:10px;padding:5px 8px;border-radius:var(--radius-sm);transition:var(--transition-fast)}
.online-user:hover{background:var(--bg-hover)}
.online-av{width:30px;height:30px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;color:#fff;box-shadow:var(--shadow-sm);position:relative}
.online-av::after{content:'';position:absolute;bottom:-2px;right:-2px;width:9px;height:9px;background:#43b581;border-radius:50%;border:2px solid var(--bg-sidebar)}
.online-name{font-size:12px;font-weight:500}

/* Sidebar Footer */
.sidebar-footer{border-top:1px solid var(--border);padding:8px 10px}
.user-card{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:var(--radius-md);background:var(--bg-hover);box-shadow:var(--shadow-xs)}
.user-avatar-sm{width:34px;height:34px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:15px;font-weight:700;color:#fff;background:var(--primary);box-shadow:var(--shadow-plastic)}
.user-info{flex:1}
.user-name-sm{font-size:13px;font-weight:600;display:block}
.user-status-sm{font-size:10px;color:var(--text-muted)}

/* ============================================
   üí¨ CHAT AREA
   ============================================ */
.chat-area{flex:1;display:flex;flex-direction:column;background:var(--bg-chat);min-width:0}

.chat-header{height:60px;display:flex;align-items:center;padding:0 18px;background:var(--bg-card);border-bottom:1px solid var(--border);box-shadow:var(--shadow-sm);z-index:10;gap:12px}
.mobile-menu-btn{display:none;width:34px;height:34px;border:none;background:var(--bg-hover);border-radius:var(--radius-sm);cursor:pointer;color:var(--text-primary);font-size:15px;align-items:center;justify-content:center}
.chat-header-info{display:flex;align-items:center;gap:12px;flex:1}
.chat-room-icon{width:38px;height:38px;background:linear-gradient(135deg,rgba(88,101,242,0.12),rgba(88,101,242,0.04));border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:17px;box-shadow:var(--shadow-plastic)}
.dm-avatar{width:38px;height:38px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:17px;font-weight:700;color:#fff;box-shadow:var(--shadow-plastic)}
.chat-room-name{font-size:16px;font-weight:700}
.chat-room-desc{font-size:12px;color:var(--text-muted)}
.chat-header-actions{display:flex;gap:4px}

.header-btn{width:36px;height:36px;border:none;background:linear-gradient(180deg,rgba(255,255,255,0.8),rgba(240,242,245,0.6));color:var(--text-secondary);border-radius:var(--radius-sm);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:var(--transition-bounce);box-shadow:var(--shadow-btn);border:1px solid var(--border);position:relative}
body.dark-mode .header-btn{background:var(--bg-input)}
.header-btn::before{content:'';position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(180deg,rgba(255,255,255,0.5),transparent);border-radius:var(--radius-sm) var(--radius-sm) 0 0;pointer-events:none}
.header-btn:hover{transform:translateY(-2px);color:var(--primary);box-shadow:var(--shadow-btn-hover)}

/* Messages */
.messages-container{flex:1;overflow-y:auto;overflow-x:hidden;position:relative;padding:16px 24px;scroll-behavior:smooth}
.messages-container::-webkit-scrollbar{width:6px}
.messages-container::-webkit-scrollbar-track{background:transparent}
.messages-container::-webkit-scrollbar-thumb{background:var(--border-strong);border-radius:3px}
.messages-wrapper{display:flex;flex-direction:column;gap:4px;min-height:100%;justify-content:flex-end}

.message{display:flex;gap:10px;max-width:75%;animation:msgIn .3s cubic-bezier(.34,1.56,.64,1);position:relative;padding:2px 0}
@keyframes msgIn{from{opacity:0;transform:translateY(16px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
.message.mine{align-self:flex-end;flex-direction:row-reverse}
.message.other{align-self:flex-start}

.msg-avatar{width:34px;height:34px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;color:#fff;flex-shrink:0;box-shadow:var(--shadow-plastic);align-self:flex-end}
.msg-content{display:flex;flex-direction:column;gap:3px;min-width:0}
.msg-name{font-size:12px;font-weight:700;padding:0 8px;display:flex;align-items:center;gap:6px}
.msg-name .msg-time{font-weight:400;font-size:11px;color:var(--text-muted)}
.message.mine .msg-name{justify-content:flex-end;color:rgba(255,255,255,0.7)}
.message.mine .msg-name .msg-time{color:rgba(255,255,255,0.5)}

.msg-bubble{padding:10px 16px;border-radius:var(--radius-msg);font-size:14px;line-height:1.5;position:relative;word-wrap:break-word;overflow-wrap:break-word}
.message.other .msg-bubble{background:var(--bg-msg-other);color:var(--text-primary);border-bottom-left-radius:var(--radius-msg-tail);box-shadow:0 2px 8px rgba(0,0,0,0.04),inset 0 1px 0 rgba(255,255,255,0.6);border:1px solid var(--border)}
.message.mine .msg-bubble{background:var(--bg-msg-mine);color:#fff;border-bottom-right-radius:var(--radius-msg-tail);box-shadow:0 4px 16px rgba(88,101,242,0.2),inset 0 1px 0 rgba(255,255,255,0.15)}
.message.mine .msg-bubble::before{content:'';position:absolute;top:0;left:0;right:0;height:45%;background:linear-gradient(180deg,rgba(255,255,255,0.12),transparent);border-radius:var(--radius-msg) var(--radius-msg) 0 0;pointer-events:none}

.msg-reply-box{padding:6px 10px;background:rgba(0,0,0,0.06);border-left:3px solid var(--primary);border-radius:var(--radius-xs);margin-bottom:6px;font-size:12px;color:var(--text-secondary)}
.message.mine .msg-reply-box{background:rgba(255,255,255,0.1);border-left-color:rgba(255,255,255,0.4);color:rgba(255,255,255,0.7)}
.msg-reply-name{font-weight:700;font-size:11px;margin-bottom:2px;color:var(--primary)}
.message.mine .msg-reply-name{color:rgba(255,255,255,0.8)}

.msg-image{max-width:280px;max-height:280px;border-radius:var(--radius-md);cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-sm);object-fit:cover}
.msg-image:hover{transform:scale(1.02);box-shadow:var(--shadow-md)}

.msg-censored{padding:8px 14px;background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.15);border-radius:var(--radius-sm);font-size:12px;color:var(--danger);font-style:italic}

.msg-actions{position:absolute;top:-8px;right:0;display:none;gap:2px;background:var(--bg-card);border-radius:var(--radius-sm);padding:3px;box-shadow:var(--shadow-md);border:1px solid var(--border);z-index:5}
.message.other .msg-actions{right:auto;left:44px}
.message:hover .msg-actions{display:flex}
.msg-action-btn{width:26px;height:26px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;border-radius:var(--radius-xs);display:flex;align-items:center;justify-content:center;font-size:12px;transition:var(--transition-fast)}
.msg-action-btn:hover{background:var(--bg-hover);color:var(--primary)}
.msg-action-btn .fa-volume-up{color:#00D4AA}
.msg-action-btn:hover .fa-volume-up{color:#00b890}

.system-msg{text-align:center;padding:6px}
.system-msg span{display:inline-block;padding:4px 16px;background:var(--bg-system);border-radius:var(--radius-full);font-size:12px;color:var(--text-muted);box-shadow:var(--shadow-xs)}

.scroll-bottom-btn{position:absolute;bottom:20px;right:24px;width:40px;height:40px;border:none;background:var(--bg-card);color:var(--text-secondary);border-radius:50%;cursor:pointer;box-shadow:var(--shadow-lg);display:flex;align-items:center;justify-content:center;font-size:15px;transition:var(--transition-bounce);z-index:5;border:1px solid var(--border)}
.scroll-bottom-btn:hover{transform:scale(1.1);color:var(--primary)}

/* Typing */
.typing-indicator{display:flex;align-items:center;gap:8px;padding:6px 24px;font-size:12px;color:var(--text-muted)}
.typing-dots{display:flex;gap:3px}
.typing-dots span{width:5px;height:5px;background:var(--text-muted);border-radius:50%;animation:tBounce 1.4s ease-in-out infinite}
.typing-dots span:nth-child(2){animation-delay:.2s}
.typing-dots span:nth-child(3){animation-delay:.4s}
@keyframes tBounce{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-5px);opacity:1}}

/* Censor Warning */
.censor-warning{display:flex;align-items:center;gap:10px;padding:8px 20px;background:rgba(239,68,68,0.06);border-top:1px solid rgba(239,68,68,0.15);font-size:13px;color:var(--danger);animation:slideUp .2s ease}
@keyframes slideUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.dismiss-btn{margin-left:auto;border:none;background:transparent;color:var(--danger);cursor:pointer;font-size:14px}

/* Input Area */
.message-input-area{padding:10px 18px 14px;background:var(--bg-card);border-top:1px solid var(--border);position:relative}
.reply-preview{display:flex;align-items:center;gap:10px;padding:8px 12px;margin-bottom:8px;background:var(--bg-hover);border-radius:var(--radius-sm);animation:slideUp .2s ease}
.reply-bar{width:3px;height:30px;background:var(--primary);border-radius:2px;flex-shrink:0}
.reply-content{flex:1;min-width:0}
.reply-to{font-size:12px;font-weight:700;color:var(--primary);display:block}
.reply-text{font-size:12px;color:var(--text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}
.reply-close{width:26px;height:26px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;border-radius:var(--radius-xs);display:flex;align-items:center;justify-content:center}

.input-row{display:flex;align-items:flex-end;gap:8px}
.input-wrapper{flex:1;background:var(--bg-input);border:2px solid var(--border-strong);border-radius:var(--radius-lg);padding:0 4px;transition:var(--transition);box-shadow:var(--shadow-glass)}
.input-wrapper:focus-within{border-color:var(--primary);box-shadow:0 0 0 4px rgba(88,101,242,0.1),var(--shadow-glass)}
.message-textarea{width:100%;border:none;outline:none;font-size:14px;font-family:inherit;background:transparent;color:var(--text-primary);padding:10px 14px;resize:none;max-height:120px;line-height:1.4}
.message-textarea::placeholder{color:var(--text-muted)}

.input-action-btn{width:40px;height:40px;border:none;background:linear-gradient(180deg,rgba(255,255,255,0.8),rgba(240,242,245,0.6));color:var(--text-secondary);border-radius:var(--radius-md);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:17px;transition:var(--transition-bounce);box-shadow:var(--shadow-btn);border:1px solid var(--border);flex-shrink:0;position:relative}
body.dark-mode .input-action-btn{background:var(--bg-input)}
.input-action-btn::before{content:'';position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(180deg,rgba(255,255,255,0.5),transparent);border-radius:var(--radius-md) var(--radius-md) 0 0;pointer-events:none}
.input-action-btn:hover{transform:translateY(-2px) scale(1.05);color:var(--primary)}

.send-btn{width:44px;height:44px;border:none;background:linear-gradient(135deg,#5865F2,#7289DA);color:#fff;border-radius:var(--radius-md);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:17px;transition:var(--transition-bounce);box-shadow:0 6px 20px rgba(88,101,242,0.3),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;flex-shrink:0}
.send-btn:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 10px 32px rgba(88,101,242,0.4)}
.send-btn:active{transform:translateY(0) scale(.95)}

/* Emoji Picker */
.emoji-picker{position:absolute;bottom:calc(100% + 8px);right:70px;width:340px;background:var(--bg-card);border-radius:var(--radius-lg);box-shadow:var(--shadow-xl);border:1px solid var(--border);overflow:hidden;animation:pickerPop .25s cubic-bezier(.34,1.56,.64,1);z-index:100}
@keyframes pickerPop{from{opacity:0;transform:scale(.9) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
.emoji-cats{display:flex;padding:6px 8px;gap:2px;border-bottom:1px solid var(--border)}
.ecat{width:34px;height:30px;border:none;background:transparent;font-size:17px;cursor:pointer;border-radius:var(--radius-xs);transition:var(--transition-fast)}
.ecat:hover{background:var(--bg-hover)}
.ecat.active{background:rgba(88,101,242,0.1)}
.emoji-grid{display:grid;grid-template-columns:repeat(8,1fr);gap:2px;padding:8px;max-height:200px;overflow-y:auto}
.emoji-grid::-webkit-scrollbar{width:4px}
.emoji-grid::-webkit-scrollbar-thumb{background:var(--border-strong);border-radius:2px}
.emoji-item{width:38px;height:38px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;border-radius:var(--radius-xs);transition:var(--transition-fast)}
.emoji-item:hover{background:var(--bg-hover);transform:scale(1.2)}

/* ============================================
   üë• FRIENDS DIALOG
   ============================================ */
.dialog-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:3000;backdrop-filter:blur(8px);animation:fadeIn .2s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.dialog-card{background:var(--bg-card);border-radius:var(--radius-xl);box-shadow:var(--shadow-xl),inset 0 1px 0 rgba(255,255,255,0.8);width:460px;max-width:92vw;overflow:hidden;animation:cardPop .3s cubic-bezier(.34,1.56,.64,1);max-height:85vh;display:flex;flex-direction:column}
.dialog-lg{width:520px}
.dialog-header{display:flex;align-items:center;justify-content:space-between;padding:16px 22px;border-bottom:1px solid var(--border);flex-shrink:0}
.dialog-header h3{font-size:15px;font-weight:700;display:flex;align-items:center;gap:8px}
.dialog-close-btn{width:30px;height:30px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:14px;transition:var(--transition-bounce)}
.dialog-close-btn:hover{background:var(--danger);color:#fff;transform:rotate(90deg)}
.dialog-body{padding:20px;overflow-y:auto;flex:1;display:flex;flex-direction:column;gap:14px}
.dialog-footer{display:flex;justify-content:flex-end;gap:8px;padding:14px 20px;border-top:1px solid var(--border)}
.dialog-btn{padding:9px 22px;border:1px solid var(--border-strong);border-radius:var(--radius-md);font-size:13px;font-weight:600;font-family:inherit;cursor:pointer;transition:var(--transition-bounce);box-shadow:var(--shadow-btn);background:var(--bg-card);color:var(--text-primary)}
.dialog-btn:hover{transform:translateY(-2px)}
.create-btn{background:linear-gradient(135deg,#5865F2,#7289DA)!important;color:#fff!important;border-color:var(--primary-dark)!important}
.create-btn:hover{box-shadow:var(--shadow-glow)!important}

.icon-picks{display:flex;gap:5px;flex-wrap:wrap}
.icon-pick{width:38px;height:38px;display:flex;align-items:center;justify-content:center;font-size:18px;border:2px solid var(--border);border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition-bounce)}
.icon-pick:hover{border-color:var(--primary);transform:scale(1.1)}
.icon-pick.active{border-color:var(--primary);background:rgba(88,101,242,0.08)}

/* Friend Tabs */
.friend-tabs{display:flex;gap:4px;border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:4px}
.ftab{flex:1;padding:8px;border:none;background:var(--bg-hover);font-size:12px;font-weight:600;color:var(--text-muted);cursor:pointer;border-radius:var(--radius-sm);transition:var(--transition);font-family:inherit;display:flex;align-items:center;justify-content:center;gap:4px;position:relative}
.ftab:hover{background:var(--border)}
.ftab.active{background:linear-gradient(135deg,rgba(88,101,242,0.1),rgba(88,101,242,0.05));color:var(--primary)}
.ftab-badge{min-width:16px;height:16px;background:var(--danger);color:#fff;font-size:9px;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0 3px}
.ftab-content{min-height:200px;max-height:50vh;overflow-y:auto}

.search-user-results,.friend-req-list,.friends-list{display:flex;flex-direction:column;gap:6px;padding:4px 0}

/* User Result Card */
.user-result-card{display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:var(--radius-md);border:1px solid var(--border);box-shadow:var(--shadow-xs);transition:var(--transition)}
.user-result-card:hover{box-shadow:var(--shadow-sm);border-color:var(--border-strong)}
.ur-avatar{width:40px;height:40px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:17px;font-weight:700;color:#fff;box-shadow:var(--shadow-plastic);flex-shrink:0}
.ur-info{flex:1;min-width:0}
.ur-name{font-size:14px;font-weight:600;display:block}
.ur-username{font-size:12px;color:var(--text-muted)}
.ur-actions{display:flex;gap:4px}

.action-btn{padding:6px 14px;border:1px solid var(--border-strong);border-radius:var(--radius-sm);font-size:12px;font-weight:600;cursor:pointer;transition:var(--transition-bounce);font-family:inherit;box-shadow:var(--shadow-btn);display:flex;align-items:center;gap:4px}
.action-btn.primary{background:linear-gradient(135deg,#5865F2,#7289DA);color:#fff;border-color:var(--primary-dark)}
.action-btn.primary:hover{box-shadow:var(--shadow-glow)}
.action-btn.success{background:linear-gradient(135deg,#10b981,#34d399);color:#fff;border-color:#059669}
.action-btn.danger{background:linear-gradient(135deg,#ef4444,#f87171);color:#fff;border-color:#dc2626}
.action-btn.secondary{background:var(--bg-card);color:var(--text-primary)}
.action-btn:hover{transform:translateY(-1px)}
.action-btn:disabled{opacity:.5;pointer-events:none}
.action-btn.pending{background:var(--bg-hover);color:var(--text-muted);border-color:var(--border);cursor:default;pointer-events:none}

.empty-state{text-align:center;padding:30px;color:var(--text-muted)}
.empty-state.small{padding:20px}
.empty-state i{font-size:32px;margin-bottom:8px;opacity:.4}
.empty-state p{font-size:13px}

/* Side Panel */
.side-panel{width:260px;background:var(--bg-card);border-left:1px solid var(--border);display:flex;flex-direction:column;flex-shrink:0;animation:slideL .3s ease}
@keyframes slideL{from{transform:translateX(100%)}to{transform:translateX(0)}}
.panel-header{display:flex;align-items:center;justify-content:space-between;padding:14px;border-bottom:1px solid var(--border)}
.panel-header h3{font-size:14px;display:flex;align-items:center;gap:8px}
.panel-close-btn{width:28px;height:28px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;border-radius:var(--radius-xs);display:flex;align-items:center;justify-content:center;transition:var(--transition)}
.panel-close-btn:hover{background:var(--danger);color:#fff}
.panel-body{flex:1;overflow-y:auto;padding:10px;display:flex;flex-direction:column;gap:4px}

/* Settings */
.setting-item{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border);font-size:14px}
.setting-select{height:32px;padding:0 10px;border:1px solid var(--border-strong);border-radius:var(--radius-sm);font-size:13px;font-family:inherit;background:var(--bg-input);color:var(--text-primary);box-shadow:var(--shadow-plastic);outline:none}
.toggle{position:relative;width:44px;height:24px}
.toggle input{display:none}
.toggle-s{position:absolute;inset:0;background:var(--border-strong);border-radius:var(--radius-full);cursor:pointer;transition:var(--transition)}
.toggle-s::after{content:'';position:absolute;left:3px;top:3px;width:18px;height:18px;background:#fff;border-radius:50%;transition:var(--transition-bounce);box-shadow:0 2px 6px rgba(0,0,0,0.15)}
.toggle input:checked+.toggle-s{background:linear-gradient(135deg,#5865F2,#7289DA)}
.toggle input:checked+.toggle-s::after{transform:translateX(20px)}
.setting-danger{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.danger-btn{padding:10px;border:1px solid rgba(239,68,68,0.2);background:rgba(239,68,68,0.06);color:var(--danger);border-radius:var(--radius-sm);cursor:pointer;font-size:13px;font-weight:500;font-family:inherit;transition:var(--transition)}
.danger-btn:hover{background:var(--danger);color:#fff}

/* Image Viewer */
.image-viewer{position:fixed;inset:0;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:5000;cursor:pointer}
.image-viewer img{max-width:90%;max-height:90%;border-radius:var(--radius-md);box-shadow:0 8px 40px rgba(0,0,0,0.4)}
.viewer-close{position:absolute;top:20px;right:20px;width:40px;height:40px;border:none;background:rgba(255,255,255,0.15);color:#fff;border-radius:50%;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:var(--transition)}
.viewer-close:hover{background:rgba(255,255,255,0.3)}

/* Search Results */
.search-results{max-height:250px;overflow-y:auto;display:flex;flex-direction:column;gap:4px}
.search-result-item{padding:8px 12px;border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition);border:1px solid var(--border)}
.search-result-item:hover{background:var(--bg-hover)}

/* Toast */
.toast-container{position:fixed;bottom:24px;right:24px;z-index:6000;display:flex;flex-direction:column;gap:8px}
.toast{display:flex;align-items:center;gap:12px;padding:12px 20px;background:var(--bg-card);border-radius:var(--radius-lg);box-shadow:var(--shadow-xl);font-size:13px;font-weight:500;animation:toastIn .4s cubic-bezier(.34,1.56,.64,1);min-width:260px;color:var(--text-primary);border-left:5px solid var(--primary)}
.toast.success{border-left-color:var(--success)}.toast.error{border-left-color:var(--danger)}.toast.warning{border-left-color:var(--warning)}.toast.info{border-left-color:#3b82f6}
.toast i{font-size:17px}
.toast.success i{color:var(--success)}.toast.error i{color:var(--danger)}.toast.warning i{color:var(--warning)}.toast.info i{color:#3b82f6}
@keyframes toastIn{from{opacity:0;transform:translateX(50px) scale(.9)}to{opacity:1;transform:translateX(0) scale(1)}}
@keyframes toastOut{to{opacity:0;transform:translateX(60px)}}

/* Mobile */
@media(max-width:768px){
    .sidebar{position:fixed;left:-100%;top:0;bottom:0;z-index:100;transition:var(--transition);width:85vw;max-width:320px}
    .sidebar.open{left:0;box-shadow:var(--shadow-xl)}
    .mobile-menu-btn{display:flex}
    .side-panel{position:fixed;right:-100%;top:0;bottom:0;z-index:100;transition:var(--transition)}
    .side-panel:not(.hidden){right:0}
    .emoji-picker{right:10px;width:calc(100vw - 20px)}
    .message{max-width:85%}
}.auth-success {
    padding: 8px 14px;
    background: rgba(16,185,129,0.08);
    color: var(--success);
    border-radius: var(--radius-sm);
    font-size: 13px;
    border-left: 4px solid var(--success);
    animation: slideUp .3s ease;
}

/* Toggle Password */
.toggle-pw {
    width: 40px; height: 46px;
    border: none; background: transparent;
    color: var(--text-muted); cursor: pointer;
    font-size: 14px; transition: var(--transition);
}
.toggle-pw:hover { color: var(--primary); }

/* Room Section Labels */
.room-section-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 10px 14px 4px;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Room Type Pick */
.room-type-pick {
    display: flex;
    gap: 10px;
}

.radio-card {
    flex: 1;
    cursor: pointer;
}

.radio-card input { display: none; }

.radio-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 14px 10px;
    border: 2px solid var(--border-strong);
    border-radius: var(--radius-md);
    transition: var(--transition-bounce);
    text-align: center;
    box-shadow: var(--shadow-plastic);
    background: var(--bg-card);
}

.radio-body i {
    font-size: 22px;
    color: var(--text-muted);
    transition: var(--transition);
}

.radio-body span {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
}

.radio-body small {
    font-size: 11px;
    color: var(--text-muted);
}

.radio-card input:checked + .radio-body {
    border-color: var(--primary);
    background: rgba(88,101,242,0.06);
    box-shadow: 0 0 0 3px rgba(88,101,242,0.12), var(--shadow-plastic);
}

.radio-card input:checked + .radio-body i {
    color: var(--primary);
}

.radio-card:hover .radio-body {
    border-color: var(--primary);
    transform: translateY(-2px);
}

/* Private Room Badge */
.room-private-badge {
    font-size: 10px;
    padding: 1px 6px;
    background: rgba(88,101,242,0.1);
    color: var(--primary);
    border-radius: var(--radius-full);
    font-weight: 600;
}

/* Access Denied */
.access-denied {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--text-muted);
    text-align: center;
    padding: 40px;
}

.access-icon {
    font-size: 64px;
    margin-bottom: 8px;
}

.access-denied h2 {
    font-size: 20px;
    color: var(--text-primary);
}

.access-denied p {
    font-size: 14px;
    max-width: 300px;
}

/* DM Header Avatar */
.dm-header-avatar {
    width: 38px; height: 38px;
    border-radius: var(--radius-md);
    display: flex; align-items: center; justify-content: center;
    font-size: 17px; font-weight: 700; color: #fff;
    box-shadow: var(--shadow-plastic);
}

/* Delete Room Button */
.danger-confirm-btn {
    padding: 9px 22px;
    border: 1px solid var(--danger);
    border-radius: var(--radius-md);
    font-size: 13px; font-weight: 600;
    font-family: inherit; cursor: pointer;
    background: linear-gradient(135deg, #ef4444, #f87171);
    color: #fff;
    transition: var(--transition-bounce);
    box-shadow: 0 4px 12px rgba(239,68,68,0.3);
}

.danger-confirm-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(239,68,68,0.4);
}

/* Room Owner Badge */
.room-owner-badge {
    font-size: 9px;
    padding: 1px 5px;
    background: linear-gradient(135deg, #f59e0b, #fbbf24);
    color: #fff;
    border-radius: var(--radius-full);
    font-weight: 700;
}

/* Unfriend in DM header */
#dmUnfriendBtn:hover {
    color: var(--danger) !important;
}

/* Loading spinner in auth */
.auth-btn.loading {
    pointer-events: none;
    opacity: 0.7;
}

.auth-btn.loading i {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
/* ============================================
   üé¨ VIDEO UPLOAD STYLES
   ============================================ */
.attach-wrap { position: relative; }
.attach-menu { position: absolute; bottom: calc(100% + 8px); left: 0; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); overflow: hidden; z-index: 100; min-width: 120px; animation: slideUp .15s ease; }
@keyframes slideUp { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.attach-opt { display:flex; align-items:center; gap:8px; width:100%; padding:10px 16px; background:none; border:none; color:var(--text); font-size:13px; cursor:pointer; transition:background .15s; white-space:nowrap; }
.attach-opt:hover { background: var(--hover); }
.attach-opt i { width:16px; text-align:center; color:var(--primary); }
.msg-video-wrap { position:relative; display:inline-block; cursor:pointer; border-radius:10px; overflow:hidden; max-width:280px; }
.msg-video { display:block; max-width:280px; max-height:200px; border-radius:10px; object-fit:cover; pointer-events:none; }
.msg-video-play-hint { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.3); border-radius:10px; color:#fff; font-size:32px; transition:background .2s; pointer-events:none; }
.msg-video-wrap:hover .msg-video-play-hint { background:rgba(0,0,0,0.5); }
#videoViewer { position:fixed; inset:0; background:rgba(0,0,0,0.92); display:flex; align-items:center; justify-content:center; z-index:9999; }
#videoViewer video { max-width:92vw; max-height:88vh; border-radius:12px; outline:none; }

/* ============================================
   üîó LINK CARD
   ============================================ */
.msg-link-card {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-left: 3px solid var(--primary);
    border-radius: 8px;
    padding: 6px 10px;
    margin: 3px 0;
    text-decoration: none !important;
    color: var(--text) !important;
    font-size: 13px;
    max-width: 280px;
    overflow: hidden;
    transition: background .15s;
}
.msg-link-card:hover { background: var(--hover); }
.msg-link-card i { color: var(--primary); flex-shrink: 0; }
.link-domain { color: var(--primary); font-weight: 600; flex-shrink: 0; }
.link-url { color: var(--text-muted); font-size: 11px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: block; max-width: 180px; }
.msg-link-card { flex-direction: column; align-items: flex-start; }
.msg-link-card .link-top { display: flex; align-items: center; gap: 6px; }

/* ============================================
   üë§ PROFILE EDIT
   ============================================ */
.setting-section-label {
    font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: .08em; color: var(--text-muted);
    margin: 4px 0 10px;
}
.setting-divider { border: none; border-top: 1px solid var(--border); margin: 14px 0; }

.profile-edit-row {
    display: flex; gap: 14px; align-items: flex-start; margin-bottom: 4px;
}
.profile-av-edit {
    position: relative; width: 64px; height: 64px;
    border-radius: 50%; cursor: pointer; flex-shrink: 0;
    overflow: hidden;
}
.profile-av-preview {
    width: 64px; height: 64px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 26px; font-weight: 700; color: #fff;
    background: #5865F2;
    background-size: cover; background-position: center;
}
.profile-av-overlay {
    position: absolute; inset: 0; background: rgba(0,0,0,0.45);
    display: flex; align-items: center; justify-content: center;
    color: #fff; font-size: 18px; opacity: 0; border-radius: 50%;
    transition: opacity .2s;
}
.profile-av-edit:hover .profile-av-overlay { opacity: 1; }

.profile-fields { flex: 1; display: flex; flex-direction: column; gap: 8px; }
.small-btn { padding: 8px 16px !important; font-size: 13px !important; }

/* ============================================
   üõ°Ô∏è ADMIN PANEL
   ============================================ */
.admin-header { background: linear-gradient(135deg, #e74c3c, #c0392b) !important; color: #fff !important; }
.admin-header h3 { color: #fff !important; }
.admin-header .dialog-close-btn { color: #fff !important; }

.admin-tabs {
    display: flex; gap: 4px; margin-bottom: 16px;
    border-bottom: 1px solid var(--border); padding-bottom: 8px;
    flex-wrap: wrap;
}
.atab {
    padding: 6px 12px; border: none; background: transparent;
    border-radius: 8px; font-size: 13px; cursor: pointer;
    color: var(--text-muted); transition: all .15s; font-weight: 500;
}
.atab:hover { background: var(--hover); color: var(--text); }
.atab.active { background: var(--primary); color: #fff; }

.atab-content { animation: fadeIn .2s ease; }
@keyframes fadeIn { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }

.admin-textarea {
    width: 100%; min-height: 90px; padding: 10px; border-radius: 10px;
    border: 1px solid var(--border); background: var(--bg);
    color: var(--text); font-size: 14px; resize: vertical;
    font-family: inherit; box-sizing: border-box; outline: none;
    transition: border-color .2s;
}
.admin-textarea:focus { border-color: var(--primary); }

/* ============================================
   üì© REPORTS
   ============================================ */
.report-card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; padding: 12px; margin-bottom: 10px;
}
.report-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 6px; gap: 8px; flex-wrap: wrap; }
.report-from { font-size: 13px; }
.report-time { font-size: 11px; color: var(--text-muted); flex-shrink: 0; }
.report-reason { font-size: 13px; color: var(--text-muted); margin-bottom: 8px; }
.report-actions { display: flex; gap: 8px; }

/* ============================================
   üö© REPORT DIALOG
   ============================================ */
.report-reasons { display: flex; flex-direction: column; gap: 8px; }
.report-reason-opt {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 14px; border-radius: 10px; cursor: pointer;
    border: 1px solid var(--border); font-size: 14px;
    transition: all .15s; background: var(--bg);
}
.report-reason-opt:hover { border-color: var(--primary); background: var(--surface); }
.report-reason-opt input { accent-color: var(--primary); }

/* ============================================
   üé¨ ATTACH + VIDEO (deduped from prev session)
   ============================================ */
.attach-wrap { position: relative; }
.attach-menu { position: absolute; bottom: calc(100% + 8px); left: 0; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); overflow: hidden; z-index: 100; min-width: 120px; animation: slideUp .15s ease; }
@keyframes slideUp { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.attach-opt { display:flex; align-items:center; gap:8px; width:100%; padding:10px 16px; background:none; border:none; color:var(--text); font-size:13px; cursor:pointer; transition:background .15s; white-space:nowrap; }
.attach-opt:hover { background: var(--hover); }
.attach-opt i { width:16px; text-align:center; color:var(--primary); }
.msg-video-wrap { position:relative; display:inline-block; cursor:pointer; border-radius:10px; overflow:hidden; max-width:280px; }
.msg-video { display:block; max-width:280px; max-height:200px; border-radius:10px; object-fit:cover; pointer-events:none; }
.msg-video-play-hint { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.3); border-radius:10px; color:#fff; font-size:32px; transition:background .2s; pointer-events:none; }
.msg-video-wrap:hover .msg-video-play-hint { background:rgba(0,0,0,0.5); }
#videoViewer { position:fixed; inset:0; background:rgba(0,0,0,0.92); display:flex; align-items:center; justify-content:center; z-index:9999; }
#videoViewer video { max-width:92vw; max-height:88vh; border-radius:12px; outline:none; }

/* ============================================
   üì¢ ADMIN NOTIFICATION BANNER
   ============================================ */
.admin-notif-banner {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 9999;
    background: linear-gradient(90deg, #e74c3c, #c0392b);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 20px;
    box-shadow: 0 4px 20px rgba(231,76,60,0.5);
    gap: 12px;
    min-height: 52px;
}
.admin-notif-banner.banner-slide-in {
    animation: bannerIn .4s cubic-bezier(.22,1,.36,1) forwards;
}
.admin-notif-banner.banner-slide-out {
    animation: bannerOut .35s ease forwards;
}
@keyframes bannerIn {
    from { transform: translateY(-100%); opacity: 0; }
    to   { transform: translateY(0);     opacity: 1; }
}
@keyframes bannerOut {
    from { transform: translateY(0);     opacity: 1; }
    to   { transform: translateY(-100%); opacity: 0; }
}
.admin-notif-content {
    display: flex;
    align-items: center;
    gap: 10px;
    flex: 1;
    font-size: 14px;
    font-weight: 500;
}
.admin-notif-content i {
    font-size: 16px;
    flex-shrink: 0;
    animation: buzz .5s ease infinite;
}
@keyframes buzz {
    0%,100% { transform: rotate(0); }
    25%  { transform: rotate(-8deg); }
    75%  { transform: rotate(8deg); }
}
.admin-notif-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: #fff;
    width: 30px; height: 30px;
    border-radius: 50%;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    font-size: 13px;
    flex-shrink: 0;
    transition: background .15s;
}
.admin-notif-close:hover { background: rgba(255,255,255,0.35); }

/* Push app down when banner is visible */
.admin-notif-banner:not(.hidden) ~ .app-container,
body:has(.admin-notif-banner:not(.hidden)) .app-container {
    margin-top: 52px;
}

/* ============================================
   üéôÔ∏è VOICE MESSAGES
   ============================================ */
.voice-btn { color: var(--text-muted) !important; }
.voice-btn.recording {
    color: #e74c3c !important;
    animation: pulse-red 1s ease infinite;
}
@keyframes pulse-red {
    0%,100% { box-shadow: 0 0 0 0 rgba(231,76,60,0.4); }
    50%      { box-shadow: 0 0 0 8px rgba(231,76,60,0); }
}

.voice-recording-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 14px;
    background: rgba(231,76,60,0.08);
    border-top: 1px solid rgba(231,76,60,0.2);
    font-size: 13px;
    color: #e74c3c;
    font-weight: 500;
}
.voice-rec-pulse {
    width: 10px; height: 10px;
    border-radius: 50%;
    background: #e74c3c;
    animation: recPulse .8s ease infinite;
    flex-shrink: 0;
}
@keyframes recPulse {
    0%,100% { opacity: 1; transform: scale(1); }
    50%      { opacity: .4; transform: scale(.7); }
}
.voice-cancel-btn {
    margin-left: auto;
    background: transparent;
    border: 1px solid #e74c3c;
    color: #e74c3c;
    border-radius: 8px;
    padding: 4px 10px;
    font-size: 12px;
    cursor: pointer;
    transition: all .15s;
}
.voice-cancel-btn:hover { background: #e74c3c; color: #fff; }

/* Voice message in chat */
.msg-voice-wrap {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 8px 12px;
    min-width: 200px;
    max-width: 280px;
}
.voice-icon { color: var(--primary); font-size: 16px; flex-shrink: 0; }
.msg-audio {
    flex: 1;
    height: 32px;
    outline: none;
    border-radius: 10px;
}
.msg-audio::-webkit-media-controls-panel { background: var(--bg); }
.voice-dur {
    font-size: 11px;
    color: var(--text-muted);
    flex-shrink: 0;
    white-space: nowrap;
}

/* ============================================
   üõ°Ô∏è SPAM WARNING (visual feedback)
   ============================================ */
.message-textarea.spammed {
    border-color: #e74c3c !important;
    animation: shake .3s ease;
}
@keyframes shake {
    0%,100% { transform: translateX(0); }
    20%,60% { transform: translateX(-4px); }
    40%,80% { transform: translateX(4px); }
}
